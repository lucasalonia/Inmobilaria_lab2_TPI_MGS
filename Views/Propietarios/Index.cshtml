@model IEnumerable<Inmobilaria_lab2_TPI_MGS.Models.Propietario>

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Propietarios</h2>
    <a class="btn btn-success btn-sm" asp-action="Create" title="Nuevo Propietario" data-bs-toggle="tooltip">
        <i class="fa-solid fa-plus"></i> Nuevo
    </a>
</div>

<div class="table-responsive">
    <table class="table table-striped table-bordered text-center align-middle">
        <thead class="table-dark">
            <tr>
                <th>@Html.DisplayNameFor(model => model.Id)</th>
                <th>@Html.DisplayNameFor(model => model.Persona.Nombre)</th>
                <th>@Html.DisplayNameFor(model => model.Persona.Apellido)</th>
                <th>@Html.DisplayNameFor(model => model.Persona.Dni)</th>
                <th>@Html.DisplayNameFor(model => model.Persona.Telefono)</th>
                <th>@Html.DisplayNameFor(model => model.Persona.Email)</th>
                <th>@Html.DisplayNameFor(model => model.Persona.FechaNacimiento)</th>
                <th>@Html.DisplayNameFor(model => model.FechaCreacion)</th>
                <th>@Html.DisplayNameFor(model => model.FechaModificacion)</th>
                <th>@Html.DisplayNameFor(model => model.CreadoPor)</th>
                <th>@Html.DisplayNameFor(model => model.ModificadoPor)</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Id</td>
                    <td>@item.Persona.Nombre</td>
                    <td>@item.Persona.Apellido</td>
                    <td>@item.Persona.Dni</td>
                    <td>@(item.Persona.Telefono ?? "-")</td>
                    <td>@(item.Persona.Email ?? "-")</td>
                    <td>@(item.Persona.FechaNacimiento?.ToString("dd/MM/yyyy") ?? "-")</td>
                    <td>@item.FechaCreacion.ToString("dd/MM/yyyy")</td>
                    <td>@item.FechaModificacion.ToString("dd/MM/yyyy")</td>
                    <td>@(item.CreadoPor?.ToString() ?? "-")</td>
                    <td>@(item.ModificadoPor?.ToString() ?? "-")</td>
                    <td>
                        <div class="btn-group btn-group-sm" role="group">
                            <a class="btn btn-primary" asp-action="Edit" asp-route-id="@item.Id">
                                <i class="fa-solid fa-pen me-1"></i> Editar
                            </a>
                            <a class="btn btn-danger" asp-action="Delete" asp-route-id="@item.Id">
                                <i class="fa-solid fa-trash me-1"></i> Eliminar
                            </a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@if (TempData["Mensaje"] != null)
{
    <div class="alert alert-success mt-3">@TempData["Mensaje"]</div>
}
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger mt-3">@TempData["Error"]</div>
}